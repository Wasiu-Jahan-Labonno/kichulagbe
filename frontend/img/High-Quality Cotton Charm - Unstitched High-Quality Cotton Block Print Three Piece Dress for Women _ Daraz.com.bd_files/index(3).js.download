!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ali/wpk-reporter")):"function"==typeof define&&define.amd?define(["exports","@ali/wpk-reporter"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iLogger={},e.wpkReporter)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(t);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,c=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=o.call(n)).done)&&(c.push(i.value),c.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return c}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function w(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}var h,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(e.includes("?")){var i=p(e.split("?"),2)[1];n=void 0===i?"":i}if(n.includes("#")){var r=p(n.split("#"),1)[0];n=void 0===r?"":r}for(var o=n.split("&"),a={};o.length;){var c=p(o.shift().split("="),2),s=c[0],l=void 0===s?"":s,u=c[1],d=void 0===u?"":u;l&&(a[l]=t?decodeURIComponent(d):d)}return a},_=!1;function y(){var e=window.navigator.userAgent;return/Android/.test(e)?"android":/(iPhone|iPod)/.test(e)?"ios":/Windows\sPhone/.test(e)?"windows_phone":"unknown"}function b(e){return e.split(".").map((function(e){return parseInt(e,10)}))}function T(e){var t=function(){if(void 0!==h)return h;var e=navigator.userAgent.match(/AliApp\(LA\/(\d+.\d+.\d+)\)/);return h=e&&e.length>1?e[1]:""}();return!!function(e){return/^\d+(\.\d+)+$/.test(e)}(t)&&function(e,t){for(var n=b(e),i=b(t),r=0;r<Math.max(n.length,i.length);r++){if(n[r]>i[r])return 1;if(n[r]<i[r])return-1}return 0}(t,e)>=0}function S(e){return window.__PAGE_NAME?"".concat(window.__PAGE_NAME,"-").concat(e):e}function O(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||window.location.search.slice(1)).split("&").reduce((function(e,t){var n=p(t.split("="),2),i=n[0],r=n[1];return e[i]=r,e}),{})}function E(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}(e.split("\r\n"));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.indexOf("x-eagleeye-id")>-1){var r=i.split(":");return r[1]?r[1]:""}}}catch(e){n.e(e)}finally{n.f()}return""}function k(){return(navigator.userAgent||"").toLowerCase().indexOf("android")>-1}function x(){var e="",t=document.head.querySelector('meta[name="itrace-bid"]')||document.head.querySelector('meta[name="wpk-pid"]')||document.head.querySelector('meta[name="wpk-bid"]');return t&&t.getAttribute("content")&&(e=t.getAttribute("content")),e}function P(e){return!!e.includes("lazada")||(!!e.includes("daraz")||(!!e.includes("mirivia")||(!!e.includes("pages.shop.")||!!e.includes("www.shop."))))}var I="OTHER";function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,r=arguments.length>2?arguments[2]:void 0;!function(e){for(var t in e)void 0===e[t]&&delete e[t]}(e=Object.assign(Object.assign({},i),e));var o=e.group;Array.isArray(o)&&(e.group=o.join("|")),0!==r.indexOf("/")&&(r="/".concat(r));var a=Object.keys(e).map((function(t){return"".concat(t,"=").concat("string"==typeof e[t]?e[t]:JSON.stringify(e[t]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(r,n||I,a,"POST"===t?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[r,n||I,a,"POST"===t?"POST":"GET"]})}var j="/lazada-marketing.ug.benefit",C=["promotion_id","promotion_status","plan_id"],A=["tag_id","tag_union_id","promotion_source","promotion_allow_cnt","promotion_amount","discount_type","percent_amount","collect_id","offer_benefit_id","min_spend","cap_value","scene_id","app"],R=["is_auto_collect"],M=["exp_type"],D=function(){return c((function e(t){o(this,e),this.baseParams={};var n=this.basic_info_check(t);if(n.is_check)n.warnMessage&&console.warn(n.warnMessage),this.setbaseInfo(t);else if(n.errorMessage)throw new Error(n.errorMessage)}),[{key:"setbaseInfo",value:function(e){this.baseParams=Object.assign(Object.assign({},this.baseParams),e)}},{key:"getbaseInfo",value:function(){return this.baseParams}},{key:"benefit_info_check",value:function(e){var t=C.filter((function(t){return void 0===e[t]||""===e[t]})),n=A.filter((function(t){return void 0===e[t]||""===e[t]})),i=!0;return n&&n.length&&(console.warn("benefit info check failed, no ".concat(n.join(","),".")),i=!0),t&&t.length&&(console.error("benefit info check failed, no ".concat(t.join(","),".")),i=!1),i}},{key:"basic_info_check",value:function(e){var t=M,n=[],i=[];return R.forEach((function(t){Array.isArray(t)?t.some((function(t){return!(void 0===e[t]||""===e[t])}))||n.push.apply(n,f(t)):void 0!==e[t]&&""!==e[t]||n.push(t)})),t.forEach((function(t){Array.isArray(t)?t.some((function(t){return!(void 0===e[t]||""===e[t])}))||i.push.apply(i,f(t)):void 0!==e[t]&&""!==e[t]||i.push(t)})),n&&n.length?{is_check:!1,errorMessage:n.length>0?"benefit info check failed, no ".concat(n.join(","),"."):null}:i&&i.length?{is_check:!0,warnMessage:i.length>0?"benefit info check failed, no ".concat(i.join(","),"."):null}:{is_check:!0}}},{key:"init_log",value:function(){L({event_name:"init"},"POST",j,I,this.getbaseInfo())}},{key:"req_exp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"req_exp"}),"POST",j,I,this.getbaseInfo())}},{key:"req_exp_callback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"req_exp_callback"}),"POST",j,I,this.getbaseInfo())}},{key:"poplayer_open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"poplayer_open"}),"POST",j,I,this.getbaseInfo())}},{key:"manual_exp",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;L(Object.assign(Object.assign({},e),{event_name:"exp"}),"POST",j,I,this.getbaseInfo())}},{key:"toggle_max",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"toggle_max"}),"POST",j,I,this.getbaseInfo())}},{key:"toggle_min",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L(Object.assign(Object.assign({},e),{event_name:"toggle_min"}),"POST",j,I,this.getbaseInfo())}},{key:"collect_click",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;L(Object.assign(Object.assign({},e),{event_name:"collect_click"}),"POST",j,I,this.getbaseInfo())}},{key:"collect_callback",value:function(e){var t=this.benefit_info_check(e);if(!t)return t;L(Object.assign(Object.assign({},e),{event_name:"collect_callback"}),"POST",j,I,this.getbaseInfo())}}])}(),N=function(){return c((function e(t){var n=this;o(this,e),this.getSpm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(n.getSpmAB().spmA,".").concat(n.getSpmAB().spmB,".").concat(e||n.spmC||0,".").concat(t||n.spmD||0)},this.getSpmLink=function(e,t,i){if(!e)return e;var r="spm=".concat(n.getSpm(t||n.spmC,i||n.spmD)),o=p(e.split("#"),2),a=o[0],c=o[1],s=p(a.split("?"),2)[1],l=((void 0===s?"":s).match(/(.*?)=(.*?)(&|$)/g)||[]).map((function(e){return"&"===e[e.length-1]?e.substring(0,e.length-1):e})).reduce((function(e,t){var n=t.match(/(.*)=(.*)/);return e[n[1]]=n[2],e}),{});if(l.spm)return e;var u=a;return a.indexOf("?")>-1?Object.keys(l).length>0?u+="&".concat(r):u+="".concat(r):u+="?".concat(r),c&&(u+="#".concat(c)),u},t.benefitOptions&&(this.benefit=new D(Object.assign(Object.assign({},t.benefitOptions),{module:t.module}))),this.baseParams={},this.initSpm(t.spm),this.setbaseInfo(t)}),[{key:"setbaseInfo",value:function(e){this.baseParams=Object.assign(Object.assign({},this.baseParams),e)}},{key:"getbaseInfo",value:function(){return this.baseParams}},{key:"initSpm",value:function(e){var t,n,i,r,o,a;if(e){var c=e.split(".");switch(c.length){case 1:this.spmC=c[0];break;case 2:this.spmC=c[0],this.spmD=c[1];break;case 3:this.spmA=c[0],this.spmB=c[1],this.spmC=c[2];break;case 4:this.spmA=c[0],this.spmB=c[1],this.spmC=c[2],this.spmC=c[3]}}this.spmA=this.spmA||(null===(t=null===window||void 0===window?void 0:window.$pegasus)||void 0===t?void 0:t.spma)||(null===(i=null===(n=null===window||void 0===window?void 0:window.g_config)||void 0===n?void 0:n.pageInfo)||void 0===i?void 0:i.spma),this.spmB=this.spmB||(null===(r=null===window||void 0===window?void 0:window.$pegasus)||void 0===r?void 0:r.spmb)||(null===(a=null===(o=null===window||void 0===window?void 0:window.g_config)||void 0===o?void 0:o.pageInfo)||void 0===a?void 0:a.spmb)}},{key:"getSpmAB",value:function(){return{spmA:this.spmA,spmB:this.spmB}}},{key:"moduleExp",value:function(e){if(!(null==e?void 0:e.spm_c))throw new Error("module exp error, no spmC ");L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(e.spm_c||this.spmC)}),"POST","/lzd.aplus-module-manual.exp","EXP",this.getbaseInfo())}},{key:"expo",value:function(e){var t,n,i,r=null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split(".");r.length>1?(n=r[0]||this.spmC,i=r[1]||this.spmD):(r.length=1)&&(n=this.spmC,i=r[0]||this.spmD),L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(i),event_name:e.event_name||"expose"}),"POST","/lzd.aplus-manual.exp","EXP",this.getbaseInfo())}},{key:"click",value:function(e){var t,n,i,r=null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split(".");r.length>1?(n=r[0]||this.spmC,i=r[1]||this.spmD):(r.length=1)&&(n=this.spmC,i=r[0]||this.spmD),L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(i,"}"),event_name:e.event_name||"click"}),"POST","/lzd.aplus-manual.clk","CLK",this.getbaseInfo())}},{key:"other",value:function(e){var t;if(!(null==e?void 0:e.event_name))throw new Error("error, no event_name");var n,i,r=(null===(t=null==e?void 0:e.spm_cd)||void 0===t?void 0:t.split("."))||[];r.length>1?(n=r[0]||this.spmC,i=r[1]||this.spmD):(r.length=1)&&(n=this.spmC,i=r[0]||this.spmD),L(Object.assign(e,{spm:"".concat(this.spmA,".").concat(this.spmB,".").concat(n,".").concat(i)}),"POST","/lzd.aplus-manual.other",I,this.getbaseInfo())}}])}(),z=["group","biz","event"],q=new N({spm:"",module:"",bizname:""});function F(e){var t=e.group,n=e.biz,i=e.event,r=d(e,z);q.other({spm_cd:"",module:"",group:t||"h5-itrace-sdk",bizname:n||"",event_name:i||"",user_data:u({},r)})}var B=0,H=0;function W(e,t,n,i){var r=function(e,t){return t||(B=B||performance.timeOrigin,e?e-B:+new Date-B-0)}(e,t),o=+new Date;H=performance.now()||0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(window.WindVane||{}).isAvailable)return!1;var i=location,r=i.origin+i.pathname;r=window.__SSR_STATUS__?i.search?r+i.search+"&pageType=SourcePageSSR"+i.hash:r+"?pageType=SourcePageSSR"+i.hash:location.href,window.WindVane&&window.WindVane.call("LACustomWVPlugin","reportPerformanceInfo",{webViewType:n,url:r,containerType:"object"===m(window.__pha_environment__)?1:0,firstScreenPaint:e,firstScreenPaintTimeStamp:t},(function(){console.log("[component_did_mount_hook] report time to App",e)}),(function(e){console.log("err",e)}))}(r,o),function(e,t,n,i){window.__wpk&&window.__wpk.report&&(window.__wpk.report(Object.assign({category:203,msg:S("componentDidMount"),wl_avgv1:e,c1:e,c2:B,c3:t||"-",c4:0,c5:H,c6:window.__SSR_STATUS__?"SourcePageSSR":""},i)),console.log("[component_did_mount_hook] report time to iTrace",e))}(r,o,0,i)}window.__WindVane=window.WindVane||{};var K=function(){window.lzdiTraceLifeCircle=Object.assign({},window.lzdiTraceLifeCircle),window.lzdiTraceLifeCircle.lzdiTraceShareDidMountTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(window.rocket_pre_hot)return null;"function"==typeof window.clearTraceLifeQueue&&window.clearTraceLifeQueue(),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";0!==e.indexOf("/")&&(e="/".concat(e));var r=Object.keys(n).map((function(e){return"".concat(e,"=").concat("string"==typeof n[e]?n[e]:JSON.stringify(n[e]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(e,t,r,"POST"===i?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,r,"POST"===i?"POST":"GET"]})}("/lzdfe.pageModule.exp","EXP"),W(e,t,0,n),window.lzdiTraceLifeCircle&&window.lzdiTraceLifeCircle.FirstScreenRenderingEnd()},window.lzdiTraceLifeCircle&&window.lzdiTraceLifeCircle.FirstScreenRenderingStart()},U=function(e){if("unknown"!==y()&&("ios"!==y()||T("7.2.0"))&&("android"!==y()||T("7.3.0"))&&window.WindVane)try{window.WindVane.call("LAWVNexpInfo","reportNexpInfo",e,(function(){console.log("reportNexpInfo:",e)}),(function(e){console.warn("reportNexpInfo failed:",e)}))}catch(e){console.error("report badcase error:",e)}},G=function(e){return Math.random()<e},J=function(e){return"string"==typeof e?parseInt(e):e},V={},X=[],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(T("7.4.0"))if("function"==typeof window.clearTraceLifeQueue&&window.clearTraceLifeQueue(),window.WindVane){(e=[].concat(e)).forEach((function(e){if(e.event&&e.time&&(V[e.event]=e.time,"first_screen_rendering_end"===e.event&&e.costTime>3e3||"fsp_end"===e.event&&e.costTime>5e3)){var t=O();U({module:"h5_perf",subModule:window.location.href,info:u(u({},e),{},{query:t,timeline:V})})}}));try{window.WindVane.call("LACustomWVPlugin","reportLifecycle",{lifecycles:e},(function(){console.log("reportLifecycle:",e)}),(function(e){console.warn("reportLifecycle failed:",e)}))}catch(e){console.error("report lifecyle error:",e)}}else X.push(e)},$=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?null:{},i=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,o=0;o<i.length;o++){var a=i[o].split("="),c=a.slice(1).join("=");t.json||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var s=a[0].replace(r,decodeURIComponent);if(c=c.replace(r,decodeURIComponent),t.json)try{c=JSON.parse(c)}catch(e){}if(e===s){n=c;break}e||(n[s]=c)}catch(e){}}return n},Q=navigator.userAgent;v();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Z(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ee={exports:{}};!function(e){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==m(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},,,function(e,t,n){var i=n(0).env,r=function(e){var t;return(e&&(t=e.replace(/^#\/?/,""))&&"string"==typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"")||"[index]"},o=function(e,t){if(t=t||{},e.env===i.BROWSER&&window)if(e.toolKit.extend({enable:!0},t).enable){e.logger.info("wpkflowPlugin已开启");var o,a,c=function(){e.reportFlow()};e.toolKit.isPageReady(e.prerender)?setTimeout(c,0):e.toolKit.onPageReady(c,!0,e.prerender),e.spa&&(n(4)(),o=function(t){r(location.hash)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},a=function(t){r(t.detail)&&(e._begin=Date.now(),e._sid=e.toolKit.getSessionId(),e.reportFlow())},e.toolKit.onListen(window,"hashchange",o),e.toolKit.onListen(window,"historystatechange",a)),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),e.toolKit.offListen(window,"hashchange"),e.toolKit.offListen(window,"historystatechange"),c=o=a=null}))}else e.logger.info("wpkflowPlugin已关闭")};o.prototype.pluginId="flow",e.exports=o},function(e,t){var n=window.history||{},i=window.document,r=function(e,t){var n;window.CustomEvent?n=new CustomEvent(e,{detail:t}):((n=i.createEvent("HTMLEvents")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)},o=function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},a=function(e){var t=n[e];"function"==typeof t&&(n[e]=function(e,i,a){var c=location.href,s=t.call(n,e,i,a);if(!a||"string"!=typeof a)return s;if(a===c)return s;try{var l=c.split("#"),u=a.split("#"),d=o(l[0]),p=o(u[0]),f=l[1]&&l[1].replace(/^\/?(.*)/,"$1"),g=u[1]&&u[1].replace(/^\/?(.*)/,"$1");d!==p?r("historystatechange",p):f!==g&&r("historystatechange",g)}catch(e){}return s},n[e].toString=e+"() { [native code] }")};e.exports=function(){a("pushState"),a("replaceState")}}])}(ee);var te=Z(ee.exports),ne={exports:{}};!function(e){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==m(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({0:function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},6:function(e,t,n){var i=n(0),r=i.sdk,o=i.http.methods,a=i.category,c=function(e){return e>=200&&e<=299},s=function(e){return-1===e.indexOf("//arms-retcode")&&-1===e.indexOf("//retcode.taobao.com")&&-1===e.indexOf("aliyuncs.com/r.png")&&-1===e.indexOf("//mdap.alipay.com/loggw")&&-1===e.indexOf("//wpk-gateway")&&-1===e.indexOf("//px.wpk.quark.cn")&&-1===e.indexOf("//px.ucweb.com")&&-1===e.indexOf("//px.effirst.com")&&-1===e.indexOf("//px-intl.ucweb.com")&&-1===e.indexOf("//gm.mmstat.com/arms.1.1")&&-1===e.indexOf("//gm.mmstat.com/arms.1.2")&&-1===e.indexOf("//g.alicdn.com/alilog")&&-1===e.indexOf("//log.m.sm.cn/0.gif")},l=function(e,t){if(e.hasOwnProperty(t))return e[t]},u=function(e,t,n){e.toolKit.isObject(n)&&e.toolKit.extend(t,{c1:l(n,"c1"),c2:l(n,"c2"),c3:l(n,"c3"),c4:l(n,"c4"),c5:l(n,"c5"),bl1:l(n,"bl1"),bl2:l(n,"bl2"),bl3:l(n,"bl3"),bl4:l(n,"bl4"),bl5:l(n,"bl5")}),e.report(t)},d=location.origin,p=function(e){return!e||0===e.indexOf(d)||!/^(\/\/|http:|https:).*/.test(e)};function f(e,t){var n=null;try{var i,r,o,a=e.toolKit.trim(t||"").split(/[\r\n]+/);a.length>0&&(n={},e.toolKit.forEach(a,(function(e){i=e.split(": "),r=i.shift(),o=i.join(": "),n[r]=o})))}catch(e){}return n}function g(e){try{if(!e)return{};var t={};return e.forEach((function(e,n){t[n]=e})),t}catch(e){return{}}}var m=function(e,t){if(e.env===i.env.BROWSER&&window){var n={enable:!0,sampleRate:1,enableTrace:!1,enableCorsTrace:function(e){return!1},requestHeaders:{"x-wpk-reqid":function(){return e.toolKit.uuid(!1)},"x-wpk-bid":function(){return e.bid}},responseHeaders:["x-eagleeye-id","x-wpk-serverid"]},l=e.toolKit.extend(n,t);l.enable?(e.logger.info("wpkinterfacePlugin已开启"),"XMLHttpRequest"in window&&function(e,t){var n=window.XMLHttpRequest.prototype,i=n.open;n.open=function(n,r){this.__reqCtx__={method:n,url:r||"",start:Date.now()};var o=[].slice.call(arguments);i.apply(this,o);var a=this;t.enableTrace&&(p(r)||t.enableCorsTrace(r))&&e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){var n=t.requestHeaders[e]();a.setRequestHeader(e,n)}))};var l=n.setRequestHeader;n.setRequestHeader=function(e,t){var n=[].slice.call(arguments);l.apply(this,n),this.__reqCtx__&&(this.__reqCtx__.headers||(this.__reqCtx__.headers={}),this.__reqCtx__.headers[e]=t)};var d=n.send;n.send=function(n){var i=this;function l(){if(i.__reqCtx__&&4===i.readyState)try{var l=Date.now(),d=(i.responseURL||i.__reqCtx__.url).split("?"),p=d[0],g=d[1]||"",m="",w=i.__reqCtx__.headers||{};i.__reqCtx__.method.toUpperCase()!==o.GET&&n&&(m=JSON.stringify(n));var h=f(e,i.getAllResponseHeaders()),v=String(i.response),_=!0,y={};"function"==typeof t.errorFilter&&(_=!!(y=t.errorFilter.call(this,{url:p,status:i.status,response:v,body:m,queryString:g,reqHeaders:w,resHeaders:h})),e.logger.warn("api errorFilter执行结果：",y)),v.length>2048&&(v="[response content too large]");var b=l-i.__reqCtx__.start;if(_&&b<121e3&&s(p)){var T=y.bizCode||i.status,S=y.reqHeaders||w,O=y.resHeaders||h,E={category:a.API,sampleRate:t.sampleRate,w_res:p,w_param:g,w_body:c(T)||!t.withBody?"":m,w_method:i.__reqCtx__.method,w_rc:T,w_rt:b,w_resp:c(T)||!t.withResp?"":y.resp||v,w_hd:JSON.stringify(S),w_trace_reqid:S&&S["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(O),w_trace_serverid:O&&O["x-wpk-serverid"]||void 0,msg:y.msg||"",w_type:16};u(e,E,y)}}catch(t){e.reportError(t,{bid:r.BID,cid:r.CID,category:a.JSERR,sampleRate:1})}}if("onreadystatechange"in i&&"function"==typeof i.onreadystatechange){var p=i.onreadystatechange;i.onreadystatechange=function(){var e=[].slice.call(arguments);l.apply(this,e),p.apply(this,e)}}else i.onreadystatechange=l;var g=[].slice.call(arguments);return d.apply(this,g)}}(e,l),"fetch"in window&&function(e,t){var n=function(e){var t=(e||"").split("?");return{apiAddr:t[0],queryString:t.length>1&&t[1]||""}},i=function(n,i,r,o,s,l,u,d,p,f,g){var m=e.toolKit.isObject(d)?d:{},w=m.reqHeaders||l,h=m.resHeaders||u;return{w_res:n,w_param:i,w_method:r,w_rc:s,w_rt:o,w_hd:JSON.stringify(w),w_trace_reqid:w&&w["x-wpk-reqid"]||void 0,w_rshd:JSON.stringify(h),w_trace_serverid:h&&h["x-wpk-serverid"]||void 0,msg:m.msg||p||"",w_body:c(s)||!t.withBody?"":f,w_resp:c(s)||!t.withResp?"":m.resp||g||"",category:a.API,sampleRate:t.sampleRate,w_type:17}},l=function(n,i,r,o,a,c,s){var l={};return"function"==typeof t.errorFilter&&(l=t.errorFilter.call(this,{url:n,queryString:i,status:r,body:o,response:a,reqHeaders:c,resHeaders:s}),e.logger.warn("api errorFilter执行结果：",l)),l},d=window.fetch;window.fetch=function(){var c=[].slice.call(arguments),f=o.GET;c[1]&&c[1].method&&(f=c[1].method.toUpperCase());var m,w=c[0];m="string"==typeof w?w:w instanceof URL?w.toString():w.url||"",t.enableTrace&&(p(m)||t.enableCorsTrace(m))&&(c[1]?void 0===c[1].headers&&(c[1].headers={}):c[1]={headers:{}},e.toolKit.forEach(Object.getOwnPropertyNames(t.requestHeaders),(function(e){c[1].headers[e]=t.requestHeaders[e]()})));var h=Date.now(),v="",_=null;return c[1]&&(_=c[1].headers),f!==o.GET&&c[1]&&c[1].body&&(v=JSON.stringify(c[1].body)),d.apply(this,c).then((function(t){try{var o=Date.now(),d=n(t.url||c[0]),p=d.apiAddr,m=d.queryString,w=t.clone(),y=g(w.headers);w.text().then((function(n){n=n||"";var r=l.call(this,p,m,t.status,v,n,_,y),a=!!r;n=n.length>2048?"[response content too large]":n;var c=o-h;if(a&&c<121e3&&s(p)){var d=r.bizCode||t.status,g=i(p,m,f,c,d,_,y,r,void 0,v,n);u(e,g,r)}}))}catch(t){e.reportError(t,{bid:r.BID,cid:r.CID,category:a.JSERR,sampleRate:1})}return t})).catch((function(t){var r=n(c[0]),o=r.apiAddr,a=r.queryString,d=l.call(this,o,a,-1,v,"",_,{}),p=!!d,g=Date.now()-h;if(p&&g<121e3&&s(o)){var m=d.bizCode||-1,w=i(o,a,f,g,m,_,{},d,t.message,v,void 0);u(e,w,d)}throw t}))}}(e,l),(e.enableMtop||l.enableMtop)&&(e.logger.info("use mtop"),function(e,t){window&&window.lib.mtop&&window.lib.mtop.middlewares&&window.lib.mtop.middlewares.push((function(n){var i=this.params,o=this.options,l=Date.now();return n().then((function(){try{if(o.H5Request&&(o.getJSON||o.postJSON))return void e.logger.debug("识别到请求为xhr, api监控交由xhr的方式处理");var n,d=o.retJson||{},p=Date.now()-l,f=d.code||200,g=i.type,m=i.api,w=e.toolKit.objToQueryString(o.querystring),h=o.postdata&&o.postdata.data?e.toolKit.objToJsonString(o.postdata.data):null,v=e.toolKit.objToJsonString(d.data||{}),_=d.ret;_ instanceof Array&&(_=_.join(",")),-1===_.indexOf("SUCCESS")&&(n=_);var y=!0,b={};if("function"==typeof t.errorFilter&&(y=!!(b=t.errorFilter.call(this,{url:m,status:f,response:v,body:h,queryString:w,msg:n})),e.logger.warn("api errorFilter执行结果：",b)),y&&p<121e3&&s(m)){var T=b.bizCode||f,S={category:a.API,sampleRate:t.sampleRate,w_res:m,w_param:w,w_body:c(T)||!t.withBody?"":h,w_method:g,w_rc:T,w_rt:p,w_resp:c(T)||!t.withResp?"":b.resp||v,msg:b.msg||n||"",w_type:100};u(e,S,b)}}catch(t){e.reportError(t,{bid:r.BID,cid:r.CID,category:a.JSERR,sampleRate:1})}}))}))}(e,l))):e.logger.info("wpkinterfacePlugin已关闭")}};m.prototype.pluginId="api",e.exports=m}})}(ne);var ie=Z(ne.exports),re={exports:{}};!function(e){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==m(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",quark:"http://px.wpk.quark.cn/api/v1/jssdk/upload",quark_https:"https://px.wpk.quark.cn/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig",quark:"http://px.wpk.quark.cn/api/v1/jconfig",quark_https:"https://px.wpk.quark.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},function(e,t,n){var i=n(0),r=function(e,t){if(e.env===i.env.BROWSER&&"undefined"!=typeof window){var n={enable:!0,sampleRate:(t=t||{}).sampleRate||1,rootNode:t.rootNode,ignorePageUrls:t.ignorePageUrls||null,maxDepth:t.maxDepth||8,minElements:t.minElements||10,keyNoteText:t.keyNoteText||[],onloadDuration:t.onloadDuration||8e3,wsDuration:t.wsDuration||3e3,startCheckingTime:t.startCheckingTime||5e3},r=e.toolKit.extend(n,t);if(r.enable){e.logger.info("wpkblankPagePlugin已开启");try{if(e.toolKit.isFunction(r.ignorePageUrls)&&r.ignorePageUrls(location))return void e.logger.info("当前页面在白屏检测的白名单中")}catch(e){}var o=!1;if(r.onloadDuration>0&&"complete"!==document.readyState&&!e.prerender)var a=setTimeout((function(){o=!0,e.reportBlankPage({w_fp:100,w_wst:r.onloadDuration}),clearTimeout(a)}),r.onloadDuration);var c=function(){clearTimeout(a);try{!o&&r.wsDuration>0&&function(e,t){var n=performance.timing;if("function"==typeof window.PerformanceNavigationTiming)try{var i=performance.getEntriesByType("navigation")[0];i&&(n=i)}catch(e){}if(n)try{n.responseEnd-n.fetchStart>=e&&t()}catch(e){}}(r.wsDuration,(function(){e.reportBlankPage({w_fp:104,w_wst:r.wsDuration})}));var t=setTimeout((function(){!function(e,t){var n,r,o,a,c,s=0,l=0,u=!1,d=[],p=function(e){return 0===e.style.width||0===e.style.height||"none"===e.style.display||0===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility||void 0!==e.type&&"hidden"===e.type},f=function(e){return e&&-1!==["VIDEO","IMG","BUTTON","TEXTAREA","RADIO","CHECKBOX","SELECT","IFRAME","CANVAS","SVG"].indexOf(e.nodeName)},g=function(n,i){for(var r=Array.prototype.slice.call(n);r.length;){var o=r.shift();i>s&&(s=i),d.push({tag:o.tagName,layer:i,cls:o.className});var a=p(o);if(e.logger.info("depth："+i,o.nodeType,o.tagName,a),!a){if(l++,f(o)){u=!0,e.logger.info("有可见元素，非白屏");break}i<=t.maxDepth&&!p(o)&&o.children.length&&g(o.children,i+1)}}},m=!1;if(r=t.rootNode?"function"==typeof t.rootNode?t.rootNode():t.rootNode:document.body)if(o=r.innerText)a=t.keyNoteText,c=o,e.toolKit.some(a,(function(e){return e===c}))?(m=!0,n=102,e.logger.warn("肯定白屏，命中关键字",o)):(m=!1,u=!0);else{var w=Array.prototype.slice.call(r.children),h=e.toolKit.filter(w,(function(e){return-1===["STYLE","SCRIPT","LINK"].indexOf(e.nodeName)}));g(h,1)}else m=!0,n=103,e.logger.warn("白屏，木有body标签或者指定的root节点为空");e.logger.warn("元素数: ",l),e.logger.warn("遍历的最大层级: ",s),e.logger.warn("dsl",d),!m&&!u&&l<t.minElements&&(m=!0,n=101),m&&(e.logger.warn("白屏了",n),e.reportBlankPage({w_fp:n,w_dsl:JSON.stringify(d),w_depth:s,w_domcnt:l}),e.report({category:i.category.MAINDOC,sampleRate:1,bl1:JSON.stringify(document.documentElement.innerHTML),_forcePost:!0}),!e._hasCollectResTiming&&performance&&"function"==typeof performance.getEntriesByType&&(e.report({category:i.category.RESTIMING,bl1:JSON.stringify(performance.getEntriesByType("resource")),bl2:performance.timeOrigin||performance.timing.fetchStart,_forcePost:!0}),e._hasCollectResTiming=!0))}(e,r),clearTimeout(t)}),r.startCheckingTime)}catch(t){e.logger.error("bkpg checking oops: ",t)}};e.toolKit.onPageReady(c,!0,e.prerender),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),c=null}))}else e.logger.info("wpkblankPagePlugin已关闭")}};r.prototype.pluginId="bkpg",e.exports=r}])}(re);var oe,ae,ce=Z(re.exports),se=k(),le=function(){se||window.isTrace2||document.addEventListener("DOMContentLoaded",(function(){window.__wpk.addPlugin(ce,{rootNode:document.getElementById("container")||document.getElementById("root")})}))},ue=x(),de=(oe=document.head.querySelector('meta[name="wpk-rel"]'))&&oe.getAttribute("content")?oe.getAttribute("content"):"",pe=function(){var e=document.head.querySelector('meta[name="wpk-sampleRate"]');return e&&e.getAttribute("content")?Number(e.getAttribute("content")):""}(),fe=v(),ge=!!(ae="object"===("undefined"==typeof location?"undefined":m(location))&&location.hostname||"")&&(ae.indexOf("i.lazada.")>=0||ae.indexOf("-p.lazada.")>=0||ae.indexOf("pre-wormhole.")>=0||ae.indexOf("pre.lazada.")>=0||ae.indexOf("pre-www.lazada.")>=0||ae.indexOf("pre-wallet-nav.lazada.")>=0||ae.indexOf("-staging.lazada.")>=0)&&fe.iTraceDebug,me=location.pathname.includes("/wow/i/sg/o2o-test/");var we={bid:ue,cid:"",uid:$("lzd_uid"),utdid:$("utdid"),rel:de||"2.0.42",sampleRate:pe||1,cluster:"intl",debug:ge||me,beforeSend:function(e){var t,n;n=!1,1===(t=e).category&&G(.01)&&(n=!0),2===t.category&&200!==t.w_rc&&G(.1)&&(n=!0),4===t.category&&G(.1)&&(n=!0),200===t.category&&J(t.c1)>5e3&&(n=!0),202===t.category&&J(t.wl_avgv1)>6e3&&(n=!0),n&&U({module:"h5_itrace",subModule:t.w_bid,info:u({},t)});var i,r,o,a=(r=(v()||{}).wh_pid||"",o=(null===(i=window)||void 0===i||null===(i=i.__SCREEN_DATAS)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.modules)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.version)||"",r&&/\/paylater(-test)?\/|\/cashloan(-test)?\/|\/credit-seller(-test)?\/|\/lazpay-warchest(-test)?\/|\/lazpay-page-module(-test)?\/|\/ewallet-h5(-test)?\/|\/dg-fe/.test(r)?o:"");a&&(e.rel=a,window.__wpk.setConfig({rel:a}));var c=(window.lzdiTraceLifeCircle||{}).lzdiTraceBeforeSend;try{return e&&c&&"function"==typeof c&&(e=c(e)),e}catch(t){return console.error("iTrace sdk beforeSend Format function execute error",t),e}}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"boolean"==typeof e.isDebug&&(e.debug=e.isDebug),e.pid&&(e.bid=e.pid),Object.assign({},we,e)},ve=/AliApp/.test(Q),_e=k(),ye=!!document.querySelector("meta[name='wpk-bid']"),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(P(location.host))if(e.pid){if(window.isTrace2)return Te(e);if("function"==typeof window.wpkReporter){var t=null;if(window.__wpk)e.pid&&(e.bid=e.pid,delete e.pid),window.__wpk.setConfig(e),t=window.__wpk;else{if(ye&&ve&&_e){var n=he(u(u({},e),{},{plugins:[[te,{enable:!1}]]}));(t=new i.default(n)).install()}else{var r=he(u(u({},e),{},{plugins:[[ie,{enable:!1}]]}));(t=new i.default(r)).installAll(),le()}window.__wpk=t}return console.log("lzd-h5-itrace version: v".concat("2.0.42")),t}console.warn("wpk-reporter is not ready.")}else console.warn("[lzd-h5-itrace] 实例化失败，缺少必要参数");else console.warn("[lzd-h5-itrace] 非法域名")},Te=function(){var e=he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return window.__wpk.setConfig(e),window.__wpk},Se=!1,Oe=function(e){if(!Se){var t=function(e){var t=e.name,n=e.duration,i=void 0===n?0:n,r=e.decodedBodySize,o=void 0===r?0:r,a=e.encodedBodySize,c=void 0===a?0:a,s=e.transferSize,l=void 0===s?0:s;try{var u=new URL(t);window.__wpk.report({category:202,msg:u.hostname,wl_avgv1:i.toFixed(2),wl_avgv2:o,wl_avgv3:c,wl_avgv4:l,c1:t,bl5:JSON.stringify(e),sampleRate:.01})}catch(e){}},n=function(e){var n=function(e){try{var t=new URL(e.name);return"https:"!==t.protocol&&"http:"!==t.protocol||"img"!==e.initiatorType||(n=t.hostname).includes("member.lazada.")||n.includes("my.lazada.")||n.includes("www.lazada.")||n.includes("pages.lazada.")||n.includes("c.lazada.")||n.includes("www.google.")||n.includes("translate.google.")||n.includes("criteo.net")||n.includes("doubleclick.net")||n.includes("googleadservices")||n.includes("cnzz.com")||n.includes("log.aliyuncs.com")||n.includes("mmstat.")||n.includes("clarity")||n.includes("ucweb.com")||n.includes("googleapis")||-1!==["graph.facebook.com","connect.facebook.net","csi.gstatic.com","airunit.taobao.com","acjs.aliyun.com","whos.amung.us","kcart.alipay.com","www.google-analytics.com","px-intl.ucweb.com","www.googletagmanager.com","googleads.g.doubleclick.net","www.facebook.com","gm.mmstat.com","sg.mmstat.com","bat.bing.com","cm.everesttech.net","pixel.everesttech.net","retcode-sg-lazada.arms.aliyuncs.com","fourier.taobao.com","pixel.tapad.com","secure.adnxs.com","s-cs.send.microad.jp","cs.adingo.jp"].indexOf(n)?null:e}catch(t){console.log("invalid url",e)}var n;return null}(e);n&&(window.requestIdleCallback?window.requestIdleCallback((function(){t(n)})):setTimeout((function(){t(n)}),0))};if(Se=!0,console.log("[lzd-h5-itrace 2.0] init images perf monitor"),window.isTrace2&&window.__wpk.setConfig(e),window.__wpk||be(e),window.performance&&window.PerformanceObserver)window.performance.getEntriesByType("resource").forEach((function(e){n(e)})),new PerformanceObserver((function(e){e.getEntries().forEach((function(e){n(e)}))})).observe({entryTypes:["resource"]})}};var Ee=function(){var e=[],t=screen.width*screen.height,n=null,i=!1,r=!1,o=["SCRIPT","LINK","SVG","IMG","VIDEO"],a=[];function c(e){if(!e)return"";var t=e.nodeName.toLowerCase();return""!==e.id?"".concat(t,"#").concat(e.id):"string"==typeof e.className?"".concat(t,".").concat(e.className.replace(" ",".")):t}function s(e){var t=[];y(e,(function(e){y(e.addedNodes,(function(e){1===e.nodeType&&t.push(e)}))})),t.length>0&&m(t.concat([]))}var l=null;function u(e){i||(r=!0,n&&clearTimeout(n),l.disconnect(),l.takeRecords(),setTimeout((function(){i=!0,v(e)}),1e3))}var d=function(){};function p(t,n){var i=0===e.length,r=screen.width,o=screen.height,a=document.documentElement,c=a?Math.min(a.clientHeight,o):o,s=a?Math.min(a.clientWidth,r):r,l=t.left+t.width,u=t.top+t.height,d=Math.round(.02*Math.min(r,o)),p=Math.round(.05*o);return i?t.width>=n||t.height>=n?d:l>=d&&s-t.left>=d&&u>=p&&c-t.top>=p:t.width>=2*d&&t.height>=2*d&&l>=p&&s-t.left>=p&&u>=p&&c-t.top>2*p}function f(e,t,n){var i=n||0;return y(e,(function(e){i=t(e,i)})),i}function g(e){var t=function(){e.lastTime=Math.max(_(),e.lastTime),e.c=document.getElementsByTagName("*").length,w()};window.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,0)}function m(n){var r=_(),s={createTime:r,lastTime:r,wait:0,piece:[],v:0,c:document.getElementsByTagName("*").length};y(n,(function(e){(function(e){for(var t=a.length,n=null,i=0;i<t;i++)if((n=a[i])&&n.contains&&n.contains(e))return!0;return!!e.hasAttribute("ignoreFspCollection")&&(a.push(e),!0)})(e)||function(e,n,r){var a=e.piece,s=document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0,l=document.documentElement.scrollLeft||window.pageXOffset||document.body&&document.body.scrollLeft||0,u=r?null:n.getBoundingClientRect(),d=r||{type:0,className:"",top:u.top+s,left:u.left+l,width:u.width,height:u.height,domPath:c(n)},m=n.offsetParent;m&&m.offsetWidth<m.scrollWidth&&(d.width=Math.min(m.offsetWidth,d.width)),m&&m.offsetHeight<m.scrollHeight&&(d.height=Math.min(m.offsetHeight,d.height));var h=n.tagName;if(-1!=o.indexOf(h.toUpperCase())&&"IMG"==h){var v=0;if(d.width=Math.max(d.width,1),d.height=Math.max(d.height,1),d.type=1,p(d)){var y=function(){if(i)n.removeEventListener("load",y,!0);else{v++,e.wait-=1;var r=n.getBoundingClientRect(),o=_();p(d,!0)&&(v<=1||o<=1e3)?(d.width=r.width,d.height=r.height,e.lastTime=Math.max(o,e.lastTime),d.size=r.width*r.height,d.v=d.size/t,e.v=f(e.piece,(function(e,t){return e.v+t}),0),g(e)):w()}},b=function(){i?n.removeEventListener("error",b,!0):(e.wait-=1,p(d)?(e.lastTime=Math.max(_(),e.lastTime),0===e.wait&&(e.v=f(e.piece,(function(e,t){return e.v+t}),0),g(e))):w())};e.wait+=1,n.addEventListener("load",y,!0),n.addEventListener("error",b,!0)}}var T={};if(window.getComputedStyle&&("none"===(T=window.getComputedStyle(n,null)).display||"fixed"===T.position))return a;if(p(d)){var S=T.backgroundImage||"",O=/url\(['"]?(.*?)['"]?\)/i;if(O.test(S)&&(S=S.replace(O,"$1"),!/^data:/i.test(S)&&S!==location.href)){e.wait+=1;var E=document.createElement("img");E.onload=function(){e.wait-=1,e.lastTime=Math.max(_(),e.lastTime),0===e.wait&&g(e)},E.src=S}(function(e,t){var n=null;for(var i in e)if(n=e[i],t.top>=n.top&&t.left>=n.left&&t.top+t.height<=n.top+n.height&&t.left+t.width<=n.left+n.width)return!0;return!1})(a,d)||(d.size=d.width*d.height,d.v=d.size/t,e.v+=d.v,d.size&&a.push(d))}}(s,e)})),s.piece.length>0&&(e.push(s),g(s))}function w(){if(!r&&!i){n&&clearTimeout(n),n=setTimeout((function(){u()}),3e3);for(var t=null,o=null,a=0,c=0,s=0,l=0,d=0,p=e.length-1;p>1;p--){if(t=e[p],o=e[p-1],l=Math.floor(100*t.v)/100,c=(d=Math.floor(100*o.v)/100)?Math.abs(l-d)/d:0,(s+=Math.min(t.v,1))>4){u();break}if(c<.5){if(++a>6){u();break}}else a>0&&(a=0)}}}var h=0;function v(t){t&&(i=!0);var n=e.length;if(0!==n){var r=[],o=[],a=[],c=[],s=-1,l=0,p=0,f=0;for(f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=e.length-1,r=0;do{var o=e[i],a=e[i-1];if(!(Math.abs(o-a)/o<t))break;r++,i--}while(i>0);return r>=n&&i>0?Math.min(i,e.length-1):e.length-1}(e.map((function(e){return Math.floor(100*e.v)/100}))),o=f>0?e.slice(0,n+2):e;o.length>0;)if(c.push([]),s=o[0].lastTime,l=o[0].c,a=[],p=0,f=0,y(o,(function(e){p+=e.v,f++,e.createTime<=s+200&&(c[c.length-1].push({frame:e}),s=Math.max(s,e.lastTime),l=Math.max(l,e.c)),e.lastTime>s&&a.push(e)})),o=a,p<.02||p/f<.01?h++:h=0,r.push([s,l]),h>=3){r.splice(r.length-3),c.splice(r.length-3),u();break}var g=r.length-1;0!==h&&g>=h&&(g-=h),g=r[g];var m=null,w=null;l=null;try{var v;g&&(m=g[0],l=g[1],function(e,t,n){if(!window.dispatchEvent||!window.CustomEvent)return;var i={cost:t,timestamp:e,domSize:n},r=new CustomEvent("jstracker.fsp",{detail:i});window.__itrace_fsp_detail__=i,window.dispatchEvent(r)}(w=performance.timing.navigationStart+m,m,l)),window.resultFrames=(v=[]).concat.apply(v,c).map((function(e,t){var n;return e.index=t+1,e.uuid=(n=8,Number(Math.random().toString().substr(2,n)+Date.now()).toString(36)),e})),window.__wpk&&window.__wpk.report&&window.__wpk.report({category:208,msg:"FSP分片信息上报",bl1:JSON.stringify(window.resultFrames)}),d&&d(w,m,l)}catch(e){}}}function _(){return performance.now()}function y(e,t){if(Array.prototype.forEach)Array.prototype.forEach.call(e,t);else for(var n=e.length,i=0;i<n;i++)t(e[i],i)}return{reset:function(){n&&clearTimeout(n),n=null,i=!1,r=!1},install:function(){window.performance&&window.MutationObserver&&((l=new MutationObserver(s)).observe(document.documentElement,{childList:!0,subtree:!0}),m(document.querySelectorAll("BODY > *")),setTimeout((function(){u(!0)}),3e4))},onReport:function(e){e&&"function"==typeof e&&(d=e)},forceStop:function(){v(!0)}}}(),ke=Ee,xe=!1,Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isSPA;if(!xe||t){xe=!0,window.__wpk||be(e);var n="",i=(window.lzdiTraceLifeCircle||{}).FSPStart,r=function(t){var i=t.timestamp,r=t.time,o=t.domSize,a=t.ssrTime,c=void 0===a?"":a,s=window.lzdiTraceLifeCircle||{},l=s.lzdiTraceShareFspTime,u=s.FSPEnd;if(console.log("[fsp-report 2.0]",i,r,o,window.preLoadTime,c),window.__lzd_fsp_done=!0,window.__wpk&&window.__wpk.report){var d=Math.floor(r)-Math.floor(window.preLoadTime||0);if(window.__lzd_fsp_value=d,d>0&&d<2e4){var p=e.msg||"自定义首屏";p=S(p);var f=window.performance.getEntriesByType("navigation")[0],g=f&&f.responseEnd;window.__wpk.report({category:e.category||200,msg:p,wl_avgv1:d,wl_avgv2:window.__SSR_FS_TIME||void 0,wl_avgv3:g,wl_avgv4:c||void 0,c1:d,c2:r,c3:window.preLoadTime||"-",c4:n,c5:window.__SSR_TRACE_ID||"-"}),"function"==typeof l&&l({fspTime:d,preLoadTime:window.preLoadTime,url:location.href}),"function"==typeof u&&u()}else{var m=d<0?"负值":"极大值 (>20s)";window.__wpk.report({category:e.category||200,msg:"".concat(m),c1:d,c2:r,c3:window.preLoadTime||"-",c4:n})}}};if("function"==typeof i&&i(),t)ke.reset(),ke.install(),ke.onReport((function(e,t,n){console.log("spa fsp install onReport"),r({timestamp:e,time:t,domSize:n})}));else if(window.fspTracker){window.__isSSR&&(n="SourcePageSSR");var o=function(e){var t=e.cost,n=e.timestamp,i=e.domSize,o=e.ssrTime;r({time:t,timestamp:n,domSize:i,ssrTime:o})};window.__FSP?o(window.__FSP):window.fspTracker.listeners.push((function(e){o(e)}))}else if(!0===window.rocket_pre_hot)ke.install(),ke.onReport((function(e,t,n){r({timestamp:e,time:t,domSize:n})}));else if(window.lzdFspTrackerPlugin){var a=window.__itrace_fsp_detail__;a?r({timestamp:a.timestamp,time:a.cost,domSize:a.domSize}):window.lzdFspTrackerPlugin.onReport((function(e,t,n){r({timestamp:e,time:t,domSize:n})}))}else ke.install(),ke.onReport((function(e,t,n){r({timestamp:e,time:t,domSize:n})}))}},Ie=["scene","status","value","args"],Le=[/c\.go\-mpulse\.net/,/ds\-aksb\-a\.akamaihd\.net\/RRT/,/s\.akamaihd\.net\/eum\/getdns\.txt/,/pre\-wormhole/],je=["SUCCESS","UNION_NOT_MATCH_FREQUENCY","FAIL_SYS_TOKEN_EMPTY","FAIL_SYS_ILLEGAL_ACCESS","FAIL_SYS_TOKEN_EXOIRED","FAIL_SYS_TOKEN_ILLEGAL"],Ce={SG:"acs-m.lazada.sg",ID:"acs-m.lazada.co.id",PH:"acs-m.lazada.com.ph",VN:"acs-m.pages.lazada.vn",TH:"acs-m.pages.lazada.co.th",MY:"acs-m.pages.lazada.com.my"};function Ae(e){if(n=e,"[object Array]"===Object.prototype.toString.call(n)){var t=e&&e.length&&e[0].split("::");return t&&t[1]?{key:t[0],displayMessage:t[1]}:-1!==e[0].indexOf("FAIL_SYS")||-1!==e[0].indexOf("SYSTEM_ERROR")||-1!==e[0].indexOf("UNKNOWN_FAIL_CODE")||-1!==e[0].indexOf("TIMEOUT")?{key:t[0],displayMessage:"Network Error"}:{key:e[0],displayMessage:"Unknown Error"}}var n;return{key:e,displayMessage:"Unknown Error"}}var Re,Me,De=function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};Le.some((function(t){return t.test(e)}))||window.__wpk.reportApi(u({msg:r,url:e,method:t,status:i,spent:n,response:i},o),{})},Ne=function(e){var t,n,i=e.params,r=e.options,o=e.spent,a=e.performanceNow,c="",s=r.retJson,l=void 0===s?{}:s,u=r.path,d=r.prefix,p=r.subDomain,f=r.pageDomain,g=l.responseHeaders,m=void 0===g?"":g,w=l.ret,h=E(m),v=Ae(w),_=v.displayMessage,y=i.type||"",b=l.v||i.v||"",T=i["x-i18n-regionID"]||"-",S=Ce[T.toUpperCase()]||T,O=l.api||i.api||"";O=O.toLowerCase(),t=i.ext_headers&&i.ext_headers["x-uid"]||"",n=je.includes(v.key)?200:0,c=u?"https:".concat(u):p&&f?"https://".concat(d?d+".":"").concat(p,".").concat(f,"/gw/").concat(O,"/").concat(b):"https://".concat(S,"/gw/").concat(O,"/").concat(b),De(c,y,o,n,v.key,{c1:t,c2:h,c3:_,c4:a,c5:v.key,c6:window.location.origin+window.location.pathname})},ze=function(e){var t;((window.__iTraceMtopQueue||[]).forEach((function(e){Ne(e)})),window.__iTraceMtopQueue=[],window.iLogger&&(window.iLogger.mtopReport=Ne),window.isMtopMiddlewareReady)||(window.__wpk||be(e),console.log("--- iLoggerMtopPluginInit ---"),window,(t=window.lib||(window.lib={}))&&t.mtop&&!t.mtop.ERROR?(t.mtop.middlewares.push((function(e){var t=this.params,n=this.options,i=n.querystring,r=parseInt((void 0===i?{}:i).t)||Date.now(),o=void 0;return performance&&"function"==typeof performance.now&&(o=Math.floor(performance.now())-Math.floor(window.preLoadTime||0)),e().then((function(){var e=(n.results[0]||{}).stat,i=(void 0===e?{}:e).oneWayTime||Date.now()-r;Ne({params:t,options:n,spent:i,performanceNow:o})}))})),window.isMtopMiddlewareReady=!0,console.log("[lzd-h5-itrace] mtop itrace plugin init success!")):console.warn("[lzd-h5-itrace] Mtop 没有初始化，无法添加 Mtop Itrace 监控插件！请参考 Mtop 文档 http://gitlab.alibaba-inc.com/mtb/lib-mtop ",t))},qe=ze,Fe=[".webp",".png",".jpg",".gif"],Be=!1,He=function(e){if(window.IMG_PRELOAD_PROFILE_PLUGIN&&!Be&&(Be=!0,console.log("[lzd-h5-itrace 2.0] init preload profile monitor"),window.isTrace2&&window.__wpk.setConfig(e),window.__wpk||be(e),window.performance&&window.PerformanceObserver)){var t,n=window.performance.getEntriesByType("resource")||[],i=[],r=0,o=n.filter((function(e){if("link"===e.initiatorType&&Fe.some((function(t){return e.name.endsWith(t)}))&&i.push(e),"link"===e.initiatorType&&e.name.endsWith(".css"))return r+=e.duration,t?e.responseEnd<t&&(t=e.responseEnd):t=e.responseEnd,!0}));if(!(o&&o.length&&i&&i.length))return;var a=[],c=[],s=0,l=0;i.forEach((function(e){e.requestStart>t?(a.push(e),s+=e.duration):(c.push(e),l+=e.duration)}));try{window.__wpk.report({category:206,msg:"Image Preload Profile",w_succ:a.length<1?1:0,wl_avgv1:c.length,wl_avgv2:a.length,wl_avgv3:r/(o.length||1),wl_avgv4:l/(c.length||1),wl_avgv5:s/(a.length||1),bl1:c.map((function(e){return e.name})).join(";"),bl2:a.map((function(e){return e.name})).join(";")})}catch(e){}}},We=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Ke=function(e){if("loading"===document.readyState)return"loading";var t=We();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},Ue=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Ge=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var i=e,r=i.id?"#"+i.id:Ue(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+r.length>(t||100)-1)return n||r;if(n=n?r+">"+n:r,i.id)break;e=i.parentNode}}catch(e){}return n},Je=-1,Ve=function(){return Je},Xe=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Je=t.timeStamp,e(t))}),!0)},Ye=function(){var e=We();return e&&e.activationStart||0},$e=function(e,t){var n=We(),i="navigate";return Ve()>=0?i="back-forward-cache":n&&(document.prerendering||Ye()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},Qe=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},Ze=function(e,t,n,i){var r,o;return function(a){t.value>=0&&(a||i)&&((o=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},et=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},tt=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},nt=function(e){var t=!1;return function(){t||(e(),t=!0)}},it=-1,rt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ot=function(e){"hidden"===document.visibilityState&&it>-1&&(it="visibilitychange"===e.type?e.timeStamp:0,ct())},at=function(){addEventListener("visibilitychange",ot,!0),addEventListener("prerenderingchange",ot,!0)},ct=function(){removeEventListener("visibilitychange",ot,!0),removeEventListener("prerenderingchange",ot,!0)},st=function(){return it<0&&(it=rt(),at(),Xe((function(){setTimeout((function(){it=rt(),at()}),0)}))),{get firstHiddenTime(){return it}}},lt=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},ut=[1800,3e3],dt=function(e,t){t=t||{},lt((function(){var n,i=st(),r=$e("FCP"),o=Qe("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Ye(),0),r.entries.push(e),n(!0)))}))}));o&&(n=Ze(e,r,ut,t.reportAllChanges),Xe((function(i){r=$e("FCP"),n=Ze(e,r,ut,t.reportAllChanges),et((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},pt=[.1,.25],ft=0,gt=1/0,mt=0,wt=function(e){e.forEach((function(e){e.interactionId&&(gt=Math.min(gt,e.interactionId),mt=Math.max(mt,e.interactionId),ft=mt?(mt-gt)/7+1:0)}))},ht=function(){return Re?ft:performance.interactionCount||0},vt=function(){"interactionCount"in performance||Re||(Re=Qe("event",wt,{type:"event",buffered:!0,durationThreshold:0}))},_t=[],yt=new Map,bt=0,Tt=[],St=function(e){if(Tt.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=_t[_t.length-1],n=yt.get(e.interactionId);if(n||_t.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};yt.set(i.id,i),_t.push(i)}_t.sort((function(e,t){return t.latency-e.latency})),_t.length>10&&_t.splice(10).forEach((function(e){return yt.delete(e.id)}))}}},Ot=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=nt(e),"hidden"===document.visibilityState?e():(n=t(e),tt(e)),n},Et=[200,500],kt=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},lt((function(){var n;vt();var i,r=$e("INP"),o=function(e){Ot((function(){e.forEach(St);var t=function(){var e=Math.min(_t.length-1,Math.floor((ht()-bt)/50));return _t[e]}();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},a=Qe("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=Ze(e,r,Et,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),tt((function(){o(a.takeRecords()),i(!0)})),Xe((function(){bt=ht(),_t.length=0,yt.clear(),r=$e("INP"),i=Ze(e,r,Et,t.reportAllChanges)})))})))},xt=[],Pt=[],It=0,Lt=new WeakMap,jt=new Map,Ct=-1,At=function(e){xt=xt.concat(e),Rt()},Rt=function(){Ct<0&&(Ct=Ot(Mt))},Mt=function(){jt.size>10&&jt.forEach((function(e,t){yt.has(t)||jt.delete(t)}));var e=_t.map((function(e){return Lt.get(e.entries[0])})),t=Pt.length-50;Pt=Pt.filter((function(n,i){return i>=t||e.includes(n)}));for(var n=new Set,i=0;i<Pt.length;i++){var r=Pt[i];Ft(r.startTime,r.processingEnd).forEach((function(e){n.add(e)}))}var o=xt.length-1-50;xt=xt.filter((function(e,t){return e.startTime>It&&t>o||n.has(e)})),Ct=-1};Tt.push((function(e){e.interactionId&&e.target&&!jt.has(e.interactionId)&&jt.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;It=Math.max(It,e.processingEnd);for(var i=Pt.length-1;i>=0;i--){var r=Pt[i];if(Math.abs(n-r.renderTime)<=8){(t=r).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},Pt.push(t)),(e.interactionId||"first-input"===e.entryType)&&Lt.set(e,t),Rt()}));var Dt,Nt,zt,qt,Ft=function(e,t){for(var n,i=[],r=0;n=xt[r];r++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;i.push(n)}return i},Bt=[2500,4e3],Ht={},Wt={passive:!0,capture:!0},Kt=new Date,Ut=function(e,t){Dt||(Dt=t,Nt=e,zt=new Date,Vt(removeEventListener),Gt())},Gt=function(){if(Nt>=0&&Nt<zt-Kt){var e={entryType:"first-input",name:Dt.type,target:Dt.target,cancelable:Dt.cancelable,startTime:Dt.timeStamp,processingStart:Dt.timeStamp+Nt};qt.forEach((function(t){t(e)})),qt=[]}},Jt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Ut(e,t),r()},i=function(){r()},r=function(){removeEventListener("pointerup",n,Wt),removeEventListener("pointercancel",i,Wt)};addEventListener("pointerup",n,Wt),addEventListener("pointercancel",i,Wt)}(t,e):Ut(t,e)}},Vt=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Jt,Wt)}))},Xt=[100,300],Yt=function(e,t){!function(e,t){t=t||{},lt((function(){var n,i=st(),r=$e("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),n(!0))},a=function(e){e.forEach(o)},c=Qe("first-input",a);n=Ze(e,r,Xt,t.reportAllChanges),c&&(tt(nt((function(){a(c.takeRecords()),c.disconnect()}))),Xe((function(){var i;r=$e("FID"),n=Ze(e,r,Xt,t.reportAllChanges),qt=[],Nt=-1,Dt=null,Vt(addEventListener),i=o,qt.push(i),Gt()})))}))}((function(t){var n=function(e){var t=e.entries[0],n={eventTarget:Ge(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Ke(t.startTime)};return Object.assign(e,{attribution:n})}(t);e(n)}),t)},$t=function(e){return/use_ssr=true/.test(window.location.href)?e-(O().uprproxy_time||0):window.__IS_TRADITION_SSR?e:window.__IS_KANGAROO_SSR?e-(window.prehotShowUpTime||0):e},Qt={};function Zt(e){if(window.__wpk&&!Qt[e.name]){Qt[e.name]=!0;try{var t=e.value;"LCP"===e.name&&(t-=window.preLoadTime||0);var n={category:1028,wl_avgv1:t,c1:window.location.pathname,c2:(window.$pegasus||{}).id,c3:e.name,c4:e.rating};if(window.__wpk.report(n),window.__wpk.listeners&&window.__wpk.listeners.length){var i=window.__wpk.listeners.filter((function(t){return e.name===t.name}));i.length>0&&i.forEach((function(t){t.callback&&t.callback(e)}))}}catch(e){console.log("reportwv error")}}}var en=function(e){!function(e,t){!function(e,t){t=t||{},lt((function(){var n,i=st(),r=$e("LCP"),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Ye(),0),r.entries=[e],n())}))},a=Qe("largest-contentful-paint",o);if(a){n=Ze(e,r,Bt,t.reportAllChanges);var c=nt((function(){Ht[r.id]||(o(a.takeRecords()),a.disconnect(),Ht[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Ot(c)}),{once:!0,capture:!0})})),tt(c),Xe((function(i){r=$e("LCP"),n=Ze(e,r,Bt,t.reportAllChanges),et((function(){r.value=performance.now()-i.timeStamp,Ht[r.id]=!0,n(!0)}))}))}}))}((function(t){var n=function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=We();if(n){var i=n.activationStart||0,r=e.entries[e.entries.length-1],o=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,n.responseStart-i),c=Math.max(a,o?(o.requestStart||o.startTime)-i:0),s=Math.max(c,o?o.responseEnd-i:0),l=Math.max(s,r.startTime-i);t={element:Ge(r.element),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:s-c,elementRenderDelay:l-s,navigationEntry:n,lcpEntry:r},r.url&&(t.url=r.url),o&&(t.lcpResourceEntry=o)}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)}((function(e){F({group:"web_vitals",event:"web_vitals_lcp",lcp_value:$t(e.value)}),Zt(e)})),function(e,t){dt((function(t){var n=function(e){var t={timeToFirstByte:0,firstByteToFCP:e.value,loadState:Ke(Ve())};if(e.entries.length){var n=We(),i=e.entries[e.entries.length-1];if(n){var r=n.activationStart||0,o=Math.max(0,n.responseStart-r);t={timeToFirstByte:o,firstByteToFCP:e.value-o,loadState:Ke(e.entries[0].startTime),navigationEntry:n,fcpEntry:i}}}return Object.assign(e,{attribution:t})}(t);e(n)}),t)}((function(e){F({group:"web_vitals",event:"web_vitals_fcp",fcp_value:$t(e.value)}),Zt(e)})),Yt((function(e){F({group:"web_vitals",event:"web_vitals_fid",fid_value:e.value}),Zt(e)})),function(e,t){Me||(Me=Qe("long-animation-frame",At)),kt((function(t){var n=function(e){var t=e.entries[0],n=Lt.get(t),i=t.processingStart,r=n.processingEnd,o=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),a=Ft(t.startTime,r),c=e.entries.find((function(e){return e.target})),s=c&&c.target||jt.get(t.interactionId),l=[t.startTime+t.duration,r].concat(a.map((function(e){return e.startTime+e.duration}))),u=Math.max.apply(Math,l),d={interactionTarget:Ge(s),interactionTargetElement:s,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:u,processedEventEntries:o,longAnimationFrameEntries:a,inputDelay:i-t.startTime,processingDuration:r-i,presentationDelay:Math.max(u-r,0),loadState:Ke(t.startTime)};return Object.assign(e,{attribution:d})}(t);e(n)}),t)}((function(e){F({group:"web_vitals",event:"web_vitals_inp",inp_value:e.value}),Zt(e)})),function(e,t){!function(e,t){t=t||{},dt(nt((function(){var n,i=$e("CLS",0),r=0,o=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],n=o[o.length-1];r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,o.push(e)):(r=e.value,o=[e])}})),r>i.value&&(i.value=r,i.entries=o,n())},c=Qe("layout-shift",a);c&&(n=Ze(e,i,pt,t.reportAllChanges),tt((function(){a(c.takeRecords()),n(!0)})),Xe((function(){r=0,i=$e("CLS",0),n=Ze(e,i,pt,t.reportAllChanges),et((function(){return n()}))})),setTimeout(n,0))})))}((function(t){var n=function(e){var t,n={};if(e.entries.length){var i=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(i&&i.sources&&i.sources.length){var r=(t=i.sources).find((function(e){return e.node&&1===e.node.nodeType}))||t[0];r&&(n={largestShiftTarget:Ge(r.node),largestShiftTime:i.startTime,largestShiftValue:i.value,largestShiftSource:r,largestShiftEntry:i,loadState:Ke(i.startTime)})}}return Object.assign(e,{attribution:n})}(t);e(n)}),t)}((function(e){F({group:"web_vitals",event:"web_vitals_cls",cls_value:e.value}),Zt(e)}))},tn=x(),nn={},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(P(location.host)){var t={selfDefineFSP:!0,mtopPluginInit:!0,imagesPerf:!0,assetPerf:!0,didMountTimeReport:!0,preloadProfile:!0,webVitals:!0,fps:!0},n=document.head.querySelector('meta[name="lzd-itrace-close-auto-monitor"]');if(n&&n.getAttribute("content"))n.getAttribute("content").split(",").forEach((function(e){var n=e.trim();t[n]=!1}));!function(){window.lzdiTraceLifeCircle=Object.assign({},window.lzdiTraceLifeCircle);var e=window.performance.timing||{};window.lzdiTraceLifeCircle.NativePrefetchEnd=function(){Y({event:"native_prefetch_end",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||Date.now()})},window.lzdiTraceLifeCircle.FirstScreenRenderingStart=function(){Y({event:"first_screen_rendering_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.responseStart})},window.lzdiTraceLifeCircle.FirstScreenRenderingEnd=function(){Y({event:"first_screen_rendering_end",time:Date.now(),costTime:Date.now()-(V.first_screen_rendering_start||e.responseStart)})},window.lzdiTraceLifeCircle.FSPStart=function(){Y({event:"fsp_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.responseStart})},window.lzdiTraceLifeCircle.FSPEnd=function(){Y({event:"fsp_end",time:Date.now(),costTime:Date.now()-(V.fsp_start||e.responseStart)})},window.lzdiTraceLifeCircle.FetchSSRDataStart=function(){Y({event:"fetch_ssr_data_start",time:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)||e.domComplete})},window.lzdiTraceLifeCircle.FetchSSRDataEnd=function(){Y({event:"fetch_ssr_data_end",time:Date.now(),costTime:Date.now()-(V.fetch_ssr_data_start||e.domComplete)})},window.lzdiTraceLifeCircle.FetchFirstScreenDataStart=function(e){e&&Y({event:"fetch_first_screen_data_start",time:e})},window.lzdiTraceLifeCircle.FetchFirstScreenDataEnd=function(e){e&&Y({event:"fetch_first_screen_data_end",time:e,costTime:e-V.fetch_first_screen_data_start})},window.lzdiTraceLifeCircle.PageRenderingEnd=function(){Y({event:"page_rendering_end",time:Date.now(),costTime:Date.now()-(V.page_rendering_start||e.responseStart)})},console.log("[lzd-h5-itrace] lifecyle report plugin ready"),document.addEventListener("DOMContentLoaded",(function(){Y(X)}))}(),t.selfDefineFSP?Pe(e):console.log("[lzd-h5-itrace] close auto run selDefineFSP"),t.imagesPerf?Oe(e):console.log("[lzd-h5-itrace] close auto run iLoggerImagesPerf"),t.assetPerf?function(){if(!_){var e=function(e){var t=e.name,n=e.responseStart,r=e.fetchStart,o=e.domainLookupEnd,a=e.domainLookupStart,c=e.requestStart,s=e.responseEnd,l=e.connectEnd,u=e.connectStart,d=e.transferSize,p=e.decodedBodySize,f=e.startTime;try{var g={category:204,msg:new URL(t).hostname,wl_avgv1:n-r,wl_avgv2:o-a,wl_avgv3:l-u,wl_avgv4:n-c,wl_avgv5:s-n,wl_avgv6:s-r,wl_avgv7:d,wl_avgv8:p,wl_avgv9:f,wl_avgv10:Math.floor(window.preLoadTime||0),wl_avgv11:f-Math.floor(window.preLoadTime||0)>0?f-Math.floor(window.preLoadTime||0):f,c1:t,c2:0===n?"true":"false",bl_1:i,sampleRate:.05};n>=0&&window.__wpk.report(g)}catch(e){}},t=function(t){window.requestIdleCallback?window.requestIdleCallback((function(){e(t)})):setTimeout((function(){e(t)}),0)},n=function(e){var n=e.filter((function(e){var t=e.initiatorType,n="css"===t&&e.name.endsWith(".css"),i="link"===t&&(e.name.endsWith(".js")||e.name.endsWith(".css"));return"script"===t||n||i}));n.forEach(t)};if(_=!0,!window.__wpk)return;var i=(v()||{}).wh_pid||location.pathname;if(console.log("[lzd-h5-itrace] init asset perf monitor"),window.performance&&window.PerformanceObserver){var r="resource",o=window.performance.getEntriesByType(r);n(o),new PerformanceObserver((function(e){n(e.getEntries())})).observe({entryTypes:[r]})}}}():console.log("[lzd-h5-itrace] close auto run iLoggerAssetPerf"),window.lib&&window.lib.mtop&&t.mtopPluginInit?qe(e):console.log("[lzd-h5-itrace] close auto run mtopPluginInit"),t.didMountTimeReport?K():console.log("[lzd-h5-itrace] disable didMountTimeReport"),t.preloadProfile?He(e):console.log("[lzd-h5-itrace] close preload profile plugin"),t.webVitals?en():console.log("[lzd-h5-itrace] disable web vitals plugin"),window.itracePluginInitialized=!0}else console.warn("[lzd-h5-itrace] 非法域名")};window&&(function(e){if(!window.isTrace2){window.addEventListener("oniLoggerMtopPluginInit",(function(e){ze(e.detail)}),!1);var t=!0;window.lib?window.lib.mtop&&(t=!1):window.lib={},t&&Object.defineProperty(window.lib,"mtop",{get:function(){return window.__lzdlib_mtop__},set:function(t){window.__lzdlib_mtop__=t,Object.defineProperty(window.lib.mtop,"middlewares",{get:function(){return window.__lzdlib_mtop_middlewares__},set:function(t){var n=new CustomEvent("oniLoggerMtopPluginInit",{detail:e||{}});window.__lzdlib_mtop_middlewares__=t,window.dispatchEvent(n)},configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}(nn),tn&&(be({pid:tn}),rn({pid:tn}))),e.iLoggerDataTrack=function(e){var t=e.scene,n=void 0===t?"unkown":t,i=e.status,r=void 0===i?1:i,o=e.value,a=void 0===o?0:o,c=e.args,s=void 0===c?"":c,l=d(e,Ie);if(/1|0/.test(r))if(/^\d+$/.test(a)){var p={w_succ:r,wl_avgv1:a,msg:n,bl1:s};Object.keys(l).forEach((function(e){/^filter([0-9]|10)$/.test(e)&&(p[e.replace("filter","c")]=l[e])})),window.__wpk&&window.__wpk.report&&window.__wpk.report(u({category:207},p))}else console.error("[lzd-h5-itrace] iLoggerDataTrack value should be correct integer");else console.error("[lzd-h5-itrace] iLoggerDataTrack status should be 0 or 1")},e.iLoggerInit=be,e.iLoggerIntegrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";try{t=be(e)}catch(e){console.log("[lzd-h5-itrace] catch iTrace sdk error, make program go on!")}return rn(e),nn=e,t},e.iLoggerMtopPluginInit=qe,e.iLoggerReportApi=De,e.iLoggerSelfDefineFSP=Pe,Object.defineProperty(e,"__esModule",{value:!0})}));
